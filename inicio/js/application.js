var eventActions,sectionNames;sectionNames=["ABA_Film","Speak","Write","Interpret","Video_Class","Excercises","Vocabulary","Assessment"],eventActions={LOGGED_IN:{name:"LOGGED_IN",properties:{userExpirationDate:{label:"user_expiration_date"},userUserType:{label:"user_user_type"},userLangId:{label:"user_lang_id"},birthDate:{label:"user_birthday"},userLevel:{label:"user_level"},userCountryId:{label:"user_country_id"},userPartnerFirstPayId:{label:"user_partner_first_pay_id"},userPartnerSourceId:{label:"user_partner_source_id"},userPartnerCurrentId:{label:"user_partner_current_id"},userSourceId:{label:"user_source_id"},userDeviceType:{label:"user_device_type"},userEntryDate:{label:"user_entry_date"},userProduct:{label:"user_product"},userConversionDate:{label:"user_conversion_date"}}},ENTERED_CAMPUS_HOME:{name:"ENTERED_CAMPUS_HOME"},ENTERED_COURSE_INDEX:{name:"ENTERED_COURSE_INDEX",properties:{levelId:{label:"level_id"}}},ENTERED_UNIT:{name:"ENTERED_UNIT",properties:{levelId:{label:"level_id"},unitId:{label:"unit_id"}}},ENTERED_SECTION:{name:"ENTERED_SECTION",properties:{levelId:{label:"level_id"},unitId:{label:"unit_id"},sectionId:{label:"section_id"}}},OPENED_VIDEOCLASSES_INDEX:{name:"OPENED_VIDEOCLASSES_INDEX",properties:{levelId:{label:"level_id"}}},OPENED_PRICES:{name:"OPENED_PRICES"},OPENED_PRICES_BY_CONTENT_BLOCKED:{name:"OPENED_PRICES_BY_CONTENT_BLOCKED"},OPENED_CHECKOUT_PAGE:{name:"OPENED_CHECKOUT_PAGE"},OPENED_CONFIRMATION_PAGE:{name:"OPENED_CONFIRMATION_PAGE"},PAID:{name:"PAID",properties:{price_paid:{label:"price_paid"},discount_applied:{label:"discount_applied"},transaction_currency:{label:"transaction_currency"},product_bought:{label:"product_bought"}}},OPENED_HELP:{name:"OPENED_HELP"},ENTERED_PROFESSOR_MESSAGE_SECTION:{name:"ENTERED_PROFESSOR_MESSAGE_SECTION"},ENTERED_INTERACTIVE_GRAMMAR:{name:"ENTERED_INTERACTIVE_GRAMMAR",properties:{levelId:{label:"level_id"}}},SELECTED_PRICE_PLAN:{name:"SELECTED_PRICE_PLAN",properties:{selectedPlan:{label:"selected_plan"}}},TRACK_CHECKOUT_PAGE_GOAL:{name:"TRACK_CHECKOUT_PAGE_GOAL"},WATCHED_FILM:{name:"WATCHED_FILM",category:"study",properties:{levelId:{label:"level_id"},unitId:{label:"unit_id"},sectionId:{label:"section_id"}}},LISTENED_AUDIO:{name:"LISTENED_AUDIO",category:"study",properties:{levelId:{label:"level_id"},unitId:{label:"unit_id"},sectionId:{label:"section_id"},exerciseId:{label:"exercise_id"}}},RECORDED_AUDIO:{name:"RECORDED_AUDIO",category:"study",properties:{levelId:{label:"level_id"},unitId:{label:"unit_id"},sectionId:{label:"section_id"},exerciseId:{label:"exercise_id"}}},COMPARED_AUDIO:{name:"COMPARED_AUDIO",category:"study",properties:{levelId:{label:"level_id"},unitId:{label:"unit_id"},sectionId:{label:"section_id"},exerciseId:{label:"exercise_id"}}},VERIFIED_TEXT:{name:"VERIFIED_TEXT",category:"study",properties:{levelId:{label:"level_id"},unitId:{label:"unit_id"},sectionId:{label:"section_id"},exerciseId:{label:"exercise_id"},result:{label:"result"},textWritten:{label:"text_written"}}},GOT_TEXT_SUGGESTION:{name:"GOT_TEXT_SUGGESTION",category:"study",properties:{levelId:{label:"level_id"},unitId:{label:"unit_id"},sectionId:{label:"section_id"},exerciseId:{label:"exercise_id"}}},STARTED_INTERPRETATION:{name:"STARTED_INTERPRETATION",category:"study",properties:{levelId:{label:"level_id"},unitId:{label:"unit_id"},sectionId:{label:"section_id"}}},REVIEWED_TEST_RESULTS:{name:"REVIEWED_TEST_RESULTS",category:"study",properties:{levelId:{label:"level_id"},unitId:{label:"unit_id"},responses:{label:"responses"},resultScore:{label:"result_score"}}},PROGRESS_UPDATE_TOTAL:{name:"PROGRESS_UPDATE_TOTAL",category:"study",properties:{levelId:{label:"level_id"},unitId:{label:"unit_id"},sectionId:{label:"section_id"},progress_ABA_Film:{label:"progress_ABA_Film"},progress_Speak:{label:"progress_Speak"},progress_Write:{label:"progress_Write"},progress_Interpret:{label:"progress_Interpret"},progress_Video_Class:{label:"progress_Video_Class"},progress_Excercises:{label:"progress_Excercises"},progress_Vocabulary:{label:"progress_Vocabulary"},progress_Assessment:{label:"progress_Assessment"},progressCurrentSectionProgress:{label:"progress_CurrentSectionProgress"},progressTotalPercentExcludingEvaluation:{label:"progress_TotalPercentExcludingEvaluation"},progressTotalPercent:{label:"progress_TotalPercent"}}},USER_REGISTERED:{name:"USER_REGISTERED",category:"profile",properties:{userExpirationDate:{label:"user_expiration_date"},userUserType:{label:"user_user_type"},userLangId:{label:"user_lang_id"},birthDate:{label:"user_birthday"},userLevel:{label:"user_level"},userCountryId:{label:"user_country_id"},userPartnerFirstPayId:{label:"user_partner_first_pay_id"},userPartnerSourceId:{label:"user_partner_source_id"},userPartnerCurrentId:{label:"user_partner_current_id"},userSourceId:{label:"user_source_id"},userDeviceType:{label:"user_device_type"},userEntryDate:{label:"user_entry_date"},userProduct:{label:"user_product"},userConversionDate:{label:"user_conversion_date"}}},CHANGED_PERSONAL_DETAILS:{name:"CHANGED_PERSONAL_DETAILS",category:"profile",properties:{userUserType:{label:"user_user_type"},userLangId:{label:"user_lang_id"},birthDate:{label:"user_birthday"},userLevel:{label:"user_level"},userCountryId:{label:"user_country_id"}}},CHANGED_LEVEL:{name:"CHANGED_LEVEL",category:"profile",properties:{userLevel:{label:"user_level"}}},ADDED_LINKEDIN:{name:"ADDED_LINKEDIN"},LIKED_FACEBOOK:{name:"LIKED_FACEBOOK",category:"profile"},REVIEWED_INSTRUCTIONS:{name:"REVIEWED_INSTRUCTIONS",category:"other",properties:{levelId:{label:"level_id"},unitId:{label:"unit_id"},sectionId:{label:"section_id"}}},SENT_PROFESOR_MESSAGE:{name:"SENT_PROFESOR_MESSAGE",category:"other",properties:{messageTitle:{label:"message_title"},messageContent:{label:"message_content"}}},DOWNLOADED_CERTIFICATE:{name:"DOWNLOADED_CERTIFICATE",category:"other",properties:{levelId:{label:"level_id"}}}};var CampusPopup,LevelTest,MemberGetMember,URLToArray,campusPopup,levelTest,levelTestClickHandler,memberGetMember,removeElementFromId,removeElementsFromClassName;CampusPopup=function(){function e(){}return e.prototype.container=null,e.prototype.isOpen=function(){return!!campusPopup.container&&campusPopup.container.dialog("isOpen")},e.prototype.setup=function(e,r,t){var n;return campusPopup.isOpen()?campusPopup.container[0].innerHTML=e:(t||(t=650),n=document.createElement("div"),n.innerHTML=e,campusPopup.container=$(n),campusPopup.container.dialog({closeOnEscape:!1,autoOpen:!1,title:!1,width:t,resizable:!1,draggable:!1,modal:!0,open:function(e,r){return campusPopup.container[0].setAttribute("id","CampusModals")},close:function(e,r){return campusPopup.container.dialog("destroy"),campusPopup.container=null}}),campusPopup.container.dialog("open")),campusPopup.setupCloseBtn(r),levelTestClickHandler()},e.prototype.renderHTML=function(e,r){return campusPopup.setup(e,r),campusPopup.center()},e.prototype.renderEmpty=function(){return campusPopup.setup("",!1),campusPopup.renderLoading(),campusPopup.center()},e.prototype.renderLoading=function(){var e;if(!document.getElementById("popupLoading"))return e=document.createElement("div"),e.id="popupLoading",e.innerHTML='<div class="loading"></div>',campusPopup.container[0].appendChild(e)},e.prototype.renderHiddenElement=function(e,r){var t,n;if(t=document.getElementById(e))return n=t.innerHTML,removeElementFromId(e),campusPopup.renderHTML(n,r)},e.prototype.renderAjax=function(e,r,t){return campusPopup.isOpen()||campusPopup.renderEmpty(),$.ajax({type:"POST",url:e,data:r,success:function(e){var r,n;if(t)return void t(e);try{if(n=$.parseJSON(e),"object"==typeof n){if(n.url)return window.location.href=n.url;if(n.html)return campusPopup.renderHTML(n.html)}}catch(l){return r=l,campusPopup.renderHTML(e)}}})},e.prototype.renderAjaxRequest=function(e,r){var t,n;return campusPopup.renderLoading(),n=e.attr("action"),t=e.serialize(),campusPopup.renderAjax(n,t,r)},e.prototype.setupCloseBtn=function(e){var r;if(void 0===e&&(e=document.getElementsByClassName("popupCloseBtn").length>0),campusPopup.isOpen()&&(removeElementsFromClassName("ui-widget-header"),e))return r=document.createElement("div"),"true"===e?r.innerHTML='<div class="ui-widget-header"><span class="ui-icon ui-icon-closethick" onclick="campusPopup.close()"></span></div>':"render"===e&&(r.innerHTML="<div class=\"ui-widget-header\"><span class=\"ui-icon ui-icon-closethick\" onclick=\"campusPopup.renderAjax('/welcome/memberGetMember','','');\"></span></div>"),campusPopup.container[0].insertBefore(r,campusPopup.container[0].children[0])},e.prototype.center=function(){if(campusPopup.isOpen())return campusPopup.container.dialog("option","position",{my:"center",at:"center",of:window})},e.prototype.close=function(){if(campusPopup.isOpen())return campusPopup.container.dialog("close")},e}(),LevelTest=function(){function e(){}return e.prototype.start=function(){var e;return e=$("input[name=nivelActual]:checked").val(),!!e&&campusPopup.renderAjaxRequest($("#formLevelSelect"))},e.prototype.startDemo=function(){return campusPopup.renderAjax("/modals/levelTest")},e.prototype.nextQuestion=function(){var e;return e=$("input[name=radioTestOptions]:checked").val(),!!e&&campusPopup.renderAjaxRequest($("#CampusModals #levelTestQuestion"),levelTest.checkAnswerAndContinue)},e.prototype.checkAnswerAndContinue=function(e){var r,t,n,l,s,o;try{if(o=$.parseJSON(e),"object"==typeof o&&o.html&&(r=$("input:radio[name=radioTestOptions]:checked")))return t=r.closest("li"),n=o.okAnswer?"green":"red",s=document.createElement("span"),s.className=o.okAnswer?"ico-success ok":"ko",s.style.marginLeft="15px",t.css("border-color",n),t.find("span").css("color",n),t.find("label").append(s),setTimeout(function(){return campusPopup.renderHTML(o.html)},800)}catch(a){l=a}},e.prototype.finish=function(){return campusPopup.renderAjaxRequest($("#CampusModals #finishTest"))},e.prototype.close=function(){return campusPopup.close()},e}(),MemberGetMember=function(){function e(){}return e.prototype.renderInvite=function(){return document.getElementById("mgmPre").style.display="none",document.getElementById("mgmWidget").style.display="block",document.getElementById("welcome_mgm_text").innerHTML+="*",campusPopup.setupCloseBtn(!0),campusPopup.center()},e}(),removeElementFromId=function(e){var r;if(r=document.getElementById(e))return r.parentNode.removeChild(r)},removeElementsFromClassName=function(e){var r,t;for(r=document.getElementsByClassName(e),t=[];r.length>0;)t.push(r[0].parentNode.removeChild(r[0]));return t},URLToArray=function(e){var r,t,n,l,s;for(s={},l=e.substring(e.indexOf("?")+1).split("&"),r=0,t=l.length;r<t;r++)n=l[r],n=n.split("="),s[decodeURIComponent(n[0])]=decodeURIComponent(n[1]);return s},window.addEventListener("resize",function(e){return setTimeout(campusPopup.center,100)},!1),window.addEventListener("scroll",function(e){return setTimeout(campusPopup.center,100)},!1),levelTestClickHandler=function(){return $("ul.welcomeLevelTest li").off("click").on("click",function(){return $(this).find("input").prop("checked",!0)})},campusPopup=new CampusPopup,memberGetMember=new MemberGetMember,levelTest=new LevelTest;